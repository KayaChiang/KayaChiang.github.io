<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <title>iPad Air Filter</title>
    <style>
        .container {
            padding: 50px 0;
        }
    </style>
</head>

<body>

    <div class="container">

        <div class="row">
            <div class="col-12 col-md-6">
                <img class="product_img" src="Apple_img/iPad/ipad-2020-hero-space-wifi-select.png"
                    style="padding: 20px 0;">

                <div class="service" style="display: flex; padding: 30px 20px; justify-content: space-around; ">


                    <div>
                        <img src="Apple_img/service.svg" style="display: block; margin: 0 auto;">
                        <span style="display: block; font-size: 10px; padding: 5px;">快速且免額外付費的運送服務</span>
                    </div>
                    <div>
                        <img src="Apple_img/customize.svg" style="display: block; margin: 0 auto;">
                        <span style="display: block; font-size: 10px; padding: 5px;">免額外付費的個人化鐫刻服務</span>
                    </div>
                    <div>
                        <img src="Apple_img/return.svg" style="display: block; margin: 0 auto;">
                        <span style="display: block; font-size: 10px; padding: 5px;">免額外付費輕鬆退貨</span>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-6 ">

                <div class="color">

                    <div class="accordion" id="accordionExample">
                        <div class="card">
                            <div class="card-header" id="headingOne">
                                <h2 class="mb-0"
                                    style="display: flex; font-size: 20px; justify-content: space-between;">
                                    <span class="color_title" style="display: flex; align-items: center;">外觀</span>
                                    <button class="btn btn-link btn-block text-left change" type="button"
                                        data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
                                        aria-controls="collapseOne"
                                        style="display: inline-block; width: 60px; font-size: 15px;">
                                        更改
                                    </button>
                                </h2>
                            </div>

                            <div class="card-body-color">

                                <template id="color-btn">
                                    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                        data-parent="#accordionExample">
                                        <button class="col-6 col-md-4 btn-outline-secondary m-2"
                                            style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
                                            <img src="Apple_img/iPad/finish-spacegray-201903.png" style="width: 30%;">
                                            <h3 style="font-size: 12px; padding: 5px 0 0 ;">太空灰色</h3>
                                        </button>
                                </template>

                                <!-- <button class="col-6 col-md-4 btn-outline-secondary m-2"
                                    style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
                                    <img src="Apple_img/iPad/finish-spacegray-201903.png" style="width: 30%;">
                                    <h3 style="font-size: 12px; padding: 5px 0 0 ;">銀色</h3>
                                </button>
                                <button class="col-6 col-md-4 btn-outline-secondary m-2"
                                    style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
                                    <img src="Apple_img/iPad/finish-spacegray-201903.png" style="width: 30%;">
                                    <h3 style="font-size: 12px; padding: 5px 0 0 ;">金色</h3>
                                </button> -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="specification">

                    <div class="accordion" id="accordionExample">
                        <div class="card">
                            <div class="card-header" id="headingTwo">
                                <h2 class="mb-0"
                                    style="display: flex; font-size: 20px; justify-content: space-between;">
                                    <span class="spec_title" style="display: flex; align-items: center;">儲存裝置</span>
                                    <button class="btn btn-link btn-block text-left change" type="button"
                                        data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true"
                                        aria-controls="collapseOne"
                                        style="display: inline-block; width: 60px; font-size: 15px;">
                                        更改
                                    </button>
                                </h2>
                            </div>
                            <div id="collapseTwo" class="collapse show" aria-labelledby="headingTwo"
                                data-parent="#accordionExample">
                                <div class="card-body">
                                    <button class="col-6 col-md-4 btn-outline-secondary m-2"
                                        style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
                                        <h3 style="font-size: 20px; padding: 5px 0 0 ;font-weight: bold;">32GB</h3>
                                        <h4 style="font-size: 13px;">NT$10,500起</h4>
                                    </button>
                                    <button class="col-6 col-md-4 btn-outline-secondary m-2"
                                        style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
                                        <h3 style="font-size: 20px; padding: 5px 0 0 ;font-weight: bold;">128GB</h3>
                                        <h4 style="font-size: 13px;">NT$13,500起</h4>
                                    </button>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="network">

                    <div class="accordion" id="accordionExample">
                        <div class="card">
                            <div class="card-header" id="headingThree">
                                <h2 class="mb-0"
                                    style="display: flex; font-size: 20px; justify-content: space-between;">
                                    <span class="net_title" style="display: flex; align-items: center;">連線能力</span>
                                    <button class="btn btn-link btn-block text-left change" type="button"
                                        data-toggle="collapse" data-target="#collapseThree" aria-expanded="true"
                                        aria-controls="collapseOne"
                                        style="display: inline-block; width: 60px; font-size: 15px;">
                                        更改
                                    </button>
                                </h2>
                            </div>
                            <div id="collapseThree" class="collapse show" aria-labelledby="headingThree"
                                data-parent="#accordionExample">
                                <div class="card-body">
                                    <button class="col-6 col-md-4 btn-outline-secondary m-2"
                                        style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
                                        <h3 style="font-size: 18px; padding: 5px 0 0 ; font-weight: bold;">Wi-Fi
                                        </h3>
                                        <h4 style="font-size: 13px;">NT$10,500起</h4>
                                    </button>
                                    <button class="col-6 col-md-4 btn-outline-secondary m-2"
                                        style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
                                        <h3 style="font-size: 18px; padding: 5px 0 0 ; font-weight: bold;">Wi-Fi +
                                            行動網路</h3>
                                        <h4 style="font-size: 13px;">NT$14,800起</h4>
                                    </button>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="total_price">
            </div>
        </div>




    </div>

    </div>

    </div>

    <script>
        //iPad的JSON資料
        const url = 'https://raw.githubusercontent.com/KayaChiang/KayaChiang.github.io/main/JS_homework/Apple_filter.json';

        let ipad_data;
        window.onload = requestIpadJson();

        function requestIpadJson() {
            let xhr = new XMLHttpRequest();
            xhr.onload = function () {
                //console.log(this.responseText);
                ipad_data = JSON.parse(this.responseText); //JSON.parse轉成陣列
                console.log(ipad_data);
                color();
            }
            xhr.open('Get', url);
            xhr.send();
        }

        function main() {



        }

        // <template id="color-btn">
        //     <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
        //         data-parent="#accordionExample">
        //         <button class="col-6 col-md-4 btn-outline-secondary m-2"
        //             style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
        //             <img src="Apple_img/iPad/finish-spacegray-201903.png" style="width: 30%;">
        //                 <h3 style="font-size: 12px; padding: 5px 0 0 ;">太空灰色</h3>
        //     </button>
        // </template>

        let color_area = document.querySelector('.card-body-color');
        let sample_color_btn = document.getElementById('color-btn');

        function color(){
            color_area = '';
            let color_arr = btn_arr('color');
            console.log(color_arr);

            color_arr.forEach(item => {
                let colorTemp = sample_color_btn.content.cloneNode(true);
                let col_btn = colorTemp.querySelector('button');
                let img = col_btn.querySelector('img');
                let h3 = col_btn.querySelector('h3');
                img.setAttribute('src', `Apple_img/${item}`)
                h3.innerText = item;

                // col_btn.addEventListener('click', function(){
                //     document.querySelector()
                // })
            })
            color_area.appendChild(colorTemp);
        }

        function btn_arr(target){
            return groupby(ipad_data.map(x => x[target]));
        }

        function groupby(array){
            let result = [];
            array.foreach(item => {
                if(result.indexOf(item) == -1) result.push(item);
            });
            return result;
        }


        function color() {
            //let color_area = document.querySelector('.color');
            let color_title = document.querySelector('.color_title'); //外觀

            //顏色文字
            let colors_txt = ipad_data.map(x => x.color);
            //console.log(colors_txt);

            //過濾陣列中重複的元素
            let each_color = colors_txt.filter(function (element, index) {
                return colors_txt.indexOf(element) == index;
            })
            //console.log(each_color); // ["太空灰色", "銀色", "金色"]

            //顏色圖
            let colors_img = ipad_data.map(x => x.color_img);
            //console.log(colors_img);

            let col_img = colors_img.filter(function (element, index) {
                return colors_img.indexOf(element) == index;
            })
            // console.log(col_img);

        }
        let color_btn = document.createElement('button');
        let color_img = document.createElement('img');
        let color_txt = document.createElement('h3');


        function btn() {

            color_btn.setAttribute('class', 'col-6 col-md-4 m-2');
            color_btn.setAttribute('style', 'background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;');

            color_img.setAttribute('style', 'width: 30%;');
            color_txt.setAttribute('style', 'font-size: 12px; padding: 5px 0 0 ;');


        }

        // <button class="col-6 col-md-4 m-2" style="background-color: #fff; padding: 10px; width: 40%; border-radius: 10px;">
        //     <img src="Apple_img/iPad/finish-spacegray-201903.png" style="width: 30%;">
        //     <h3 style="font-size: 12px; padding: 5px 0 0 ;">太空灰色</h3>
        // </button>

        function product() {
            let product_img = document.querySelector('.product_img'); //大圖

            //商品圖
            let pro_img = ipad_data.map(x => x.product_Url);

            let products = pro_img.filter(function (element, index) {
                return pro_img.indexOf(element) == index;
            })
            console.log(products);
        }

        function spec() {
            let specification = document.querySelector('.specification');

            let spec = ipad_data.map(x => x.size);
            let _spec = spec.filter(function (element, index) {
                return spec.indexOf(element) == index;
            })
            console.log(_spec);
        }

        function net() {
            let network = document.querySelector('.network');

            let net = ipad_data.map(x => x.network);

            let _net = net.filter(function (element, index) {
                return net.indexOf(element) == index;
            })
            console.log(_net);
        }

        function price() {
            let total_price = document.querySelector('.total_price');

            let price = ipad_data.map(x => x.price);

            let _price = price.filter(function (element, index) {
                return price.indexOf(element) == index;
            })
            console.log(_price);
        }



    </script>



    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
        integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
        crossorigin="anonymous"></script>
</body>

</html>